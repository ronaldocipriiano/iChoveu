(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(e){if(e.ep)return;e.ep=!0;const i=a(e);fetch(e.href,i)}})();const g="bc352b594baa41b0a25225550242702",v=async n=>{const a=await(await fetch(`https://api.weatherapi.com/v1/search.json?lang=pt&key=${g}&q=${n}`)).json();return a.length||window.alert("Nenhuma cidade encontrada"),a},x=async n=>{const a=await(await fetch(`https://api.weatherapi.com/v1/current.json?lang=pt&key=${g}&q=${n}`)).json(),{current:c,location:e}=a;return{name:e.name,country:e.country,temp:c.temp_c,condition:c.condition.text,icon:c.condition.icon,url:n}},k=async n=>(await(await fetch(`https://api.weatherapi.com/v1/forecast.json?lang=pt&key=${g}&q=${n}&days=7`)).json()).forecast.forecastday.map(e=>({date:e.date,maxTemp:e.day.maxtemp_c,minTemp:e.day.mintemp_c,condition:e.day.condition.text,icon:e.day.condition.icon}));function t(n,o,a=""){const c=document.createElement(n);return c.classList.add(...o.split(" ")),c.textContent=a,c}function I(n){const{date:o,maxTemp:a,minTemp:c,condition:e,icon:i}=n,s=new Date(o);s.setDate(s.getDate()+1);const r=s.toLocaleDateString("pt-BR",{weekday:"short"}),d=t("div","forecast"),h=t("p","forecast-weekday",r),y=t("span","forecast-temp max","max"),E=t("span","forecast-temp max",`${a}\xBA`),C=t("span","forecast-temp min","min"),p=t("span","forecast-temp min",`${c}\xBA`),l=t("div","forecast-temp-container");l.appendChild(y),l.appendChild(C),l.appendChild(E),l.appendChild(p);const m=t("p","forecast-condition",e),f=t("img","forecast-icon");f.src=i.replace("64x64","128x128");const u=t("div","forecast-middle-container");return u.appendChild(l),u.appendChild(f),d.appendChild(h),d.appendChild(u),d.appendChild(m),d}function w(n){const o=document.getElementById(n);for(;o.firstChild;)o.removeChild(o.firstChild)}function L(n){const o=document.getElementById("forecast-container"),a=document.getElementById("weekdays");w("weekdays"),n.forEach(c=>{const e=I(c);a.appendChild(e)}),o.classList.remove("hidden")}function B(n){const{name:o,country:a,temp:c,condition:e,icon:i,url:s}=n,r=t("li","city"),d=t("div","city-heading"),h=t("h2","city-name",o),y=t("p","city-country",a);d.appendChild(h),d.appendChild(y);const E=t("p","city-temp",`${c}\xBA`),C=t("p","city-condition",e),p=t("div","city-temp-container");p.appendChild(C),p.appendChild(E);const l=t("img","condition-icon");l.src=i.replace("64x64","128x128");const m=t("div","city-info-container");m.appendChild(p),m.appendChild(l),r.appendChild(d),r.appendChild(m);const f=t("button","forecast-button","Ver previs\xE3o");return r.appendChild(f),f.addEventListener("click",async()=>{const u=await k(s);await L(u)}),r}async function b(n){n.preventDefault(),w("cities");const a=document.getElementById("search-input").value;if(!a)return;const c=await v(a),e=document.getElementById("cities");c.forEach(async i=>{const s=await x(i.url),r=B(s);e.appendChild(r)})}document.getElementById("search-form").addEventListener("submit",b);document.getElementById("close-forecast").addEventListener("click",()=>{document.getElementById("forecast-container").classList.add("hidden")});
